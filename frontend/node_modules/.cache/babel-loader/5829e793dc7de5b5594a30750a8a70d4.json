{"ast":null,"code":"var _jsxFileName = \"/Users/baljeetsingh/Desktop/software/s2020-djma/algo_interact/frontend/src/components/React-D3-Graph/Graph/node/Node.jsx\";\nimport React from \"react\";\nimport CONST from \"./node.const\";\nimport nodeHelper from \"./node.helper\";\n/**\n * Node component is responsible for encapsulating node render.\n * @example\n * const onClickNode = function(nodeId) {\n *      window.alert('Clicked node', nodeId);\n * };\n *\n * const onRightClickNode = function(nodeId) {\n *      window.alert('Right clicked node', nodeId);\n * }\n *\n * const onMouseOverNode = function(nodeId) {\n *      window.alert('Mouse over node', nodeId);\n * };\n *\n * const onMouseOutNode = function(nodeId) {\n *      window.alert('Mouse out node', nodeId);\n * };\n *\n * <Node\n *     id='nodeId'\n *     cx=22\n *     cy=22\n *     fill='green'\n *     fontSize=10\n *     fontColor='black'\n *     fontWeight='normal'\n *     dx=90\n *     label='label text'\n *     opacity=1\n *     renderLabel=true\n *     size=200\n *     stroke='none'\n *     strokeWidth=1.5\n *     svg='assets/my-svg.svg'\n *     type='square'\n *     viewGenerator=(node) => <CustomComponent node={node} />\n *     className='node'\n *     onClickNode={onClickNode}\n *     onRightClickNode={onRightClickNode}\n *     onMouseOverNode={onMouseOverNode}\n *     onMouseOutNode={onMouseOutNode} />\n */\n\nexport default class Node extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.handleOnClickNode = () => this.props.onClickNode && this.props.onClickNode(this.props.id);\n\n    this.handleOnRightClickNode = event => this.props.onRightClickNode && this.props.onRightClickNode(event, this.props.id);\n\n    this.handleOnMouseOverNode = () => this.props.onMouseOverNode && this.props.onMouseOverNode(this.props.id);\n\n    this.handleOnMouseOutNode = () => this.props.onMouseOut && this.props.onMouseOut(this.props.id);\n\n    this.test = () => console.log(\"TEST\");\n  }\n\n  render() {\n    const nodeProps = {\n      cursor: this.props.cursor,\n      onClick: this.handleOnClickNode,\n      onContextMenu: this.handleOnRightClickNode,\n      onMouseOut: this.handleOnMouseOutNode,\n      onMouseOver: this.handleOnMouseOverNode,\n      opacity: this.props.opacity\n    };\n    const textProps = {\n      dx: this.props.dx || CONST.NODE_LABEL_DX,\n      dy: CONST.NODE_LABEL_DY,\n      fill: this.props.fontColor,\n      fontSize: this.props.fontSize,\n      fontWeight: this.props.fontWeight,\n      opacity: this.props.opacity\n    };\n    const size = this.props.size;\n    let gtx = this.props.cx,\n        gty = this.props.cy,\n        label = null,\n        node = null;\n\n    if (this.props.svg || this.props.viewGenerator) {\n      const height = size / 10;\n      const width = size / 10;\n      const tx = width / 2;\n      const ty = height / 2;\n      const transform = `translate(${tx},${ty})`;\n      label = React.createElement(\"text\", Object.assign({}, textProps, {\n        transform: transform,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }), this.props.label); // By default, if a view generator is set, it takes precedence over any svg image url\n\n      if (this.props.viewGenerator && !this.props.overrideGlobalViewGenerator) {\n        node = React.createElement(\"svg\", Object.assign({}, nodeProps, {\n          width: width,\n          height: height,\n          id: \"clickable-node\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }), React.createElement(\"foreignObject\", {\n          x: \"0\",\n          y: \"0\",\n          width: \"100%\",\n          height: \"100%\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }, React.createElement(\"section\", {\n          style: {\n            height,\n            width,\n            backgroundColor: \"transparent\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }, this.props.viewGenerator(this.props))));\n      } else {\n        node = React.createElement(\"image\", Object.assign({}, nodeProps, {\n          href: this.props.svg,\n          width: width,\n          height: height,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }));\n      } // svg offset transform regarding svg width/height\n\n\n      gtx -= tx;\n      gty -= ty;\n    } else {\n      nodeProps.d = nodeHelper.buildSvgSymbol(size, this.props.type);\n      nodeProps.fill = this.props.fill;\n      nodeProps.stroke = this.props.stroke;\n      nodeProps.strokeWidth = this.props.strokeWidth;\n      label = React.createElement(\"text\", Object.assign({}, textProps, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }), this.props.label);\n      node = React.createElement(\"path\", Object.assign({}, nodeProps, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }));\n    }\n\n    const gProps = {\n      className: this.props.className,\n      cx: this.props.cx,\n      cy: this.props.cy,\n      id: this.props.id,\n      transform: `translate(${gtx},${gty})`\n    };\n\n    function handleClick(e, data) {\n      console.log(data.foo);\n    }\n\n    return React.createElement(\"g\", Object.assign({}, gProps, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }), node, this.props.renderLabel && label);\n  }\n\n}","map":{"version":3,"sources":["/Users/baljeetsingh/Desktop/software/s2020-djma/algo_interact/frontend/src/components/React-D3-Graph/Graph/node/Node.jsx"],"names":["React","CONST","nodeHelper","Node","Component","handleOnClickNode","props","onClickNode","id","handleOnRightClickNode","event","onRightClickNode","handleOnMouseOverNode","onMouseOverNode","handleOnMouseOutNode","onMouseOut","test","console","log","render","nodeProps","cursor","onClick","onContextMenu","onMouseOver","opacity","textProps","dx","NODE_LABEL_DX","dy","NODE_LABEL_DY","fill","fontColor","fontSize","fontWeight","size","gtx","cx","gty","cy","label","node","svg","viewGenerator","height","width","tx","ty","transform","overrideGlobalViewGenerator","backgroundColor","d","buildSvgSymbol","type","stroke","strokeWidth","gProps","className","handleClick","e","data","foo","renderLabel"],"mappings":"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","sourcesContent":["import React from \"react\";\n\nimport CONST from \"./node.const\";\n\nimport nodeHelper from \"./node.helper\";\n\n/**\n * Node component is responsible for encapsulating node render.\n * @example\n * const onClickNode = function(nodeId) {\n *      window.alert('Clicked node', nodeId);\n * };\n *\n * const onRightClickNode = function(nodeId) {\n *      window.alert('Right clicked node', nodeId);\n * }\n *\n * const onMouseOverNode = function(nodeId) {\n *      window.alert('Mouse over node', nodeId);\n * };\n *\n * const onMouseOutNode = function(nodeId) {\n *      window.alert('Mouse out node', nodeId);\n * };\n *\n * <Node\n *     id='nodeId'\n *     cx=22\n *     cy=22\n *     fill='green'\n *     fontSize=10\n *     fontColor='black'\n *     fontWeight='normal'\n *     dx=90\n *     label='label text'\n *     opacity=1\n *     renderLabel=true\n *     size=200\n *     stroke='none'\n *     strokeWidth=1.5\n *     svg='assets/my-svg.svg'\n *     type='square'\n *     viewGenerator=(node) => <CustomComponent node={node} />\n *     className='node'\n *     onClickNode={onClickNode}\n *     onRightClickNode={onRightClickNode}\n *     onMouseOverNode={onMouseOverNode}\n *     onMouseOutNode={onMouseOutNode} />\n */\nexport default class Node extends React.Component {\n  /**\n   * Handle click on the node.\n   * @returns {undefined}\n   */\n  handleOnClickNode = () =>\n    this.props.onClickNode && this.props.onClickNode(this.props.id);\n\n  /**\n   * Handle right click on the node.\n   * @param {Object} event - native event.\n   * @returns {undefined}\n   */\n  handleOnRightClickNode = (event) =>\n    this.props.onRightClickNode &&\n    this.props.onRightClickNode(event, this.props.id);\n\n  /**\n   * Handle mouse over node event.\n   * @returns {undefined}\n   */\n  handleOnMouseOverNode = () =>\n    this.props.onMouseOverNode && this.props.onMouseOverNode(this.props.id);\n\n  /**\n   * Handle mouse out node event.\n   * @returns {undefined}\n   */\n  handleOnMouseOutNode = () =>\n    this.props.onMouseOut && this.props.onMouseOut(this.props.id);\n\n  test = () => console.log(\"TEST\");\n\n  render() {\n    const nodeProps = {\n      cursor: this.props.cursor,\n      onClick: this.handleOnClickNode,\n      onContextMenu: this.handleOnRightClickNode,\n      onMouseOut: this.handleOnMouseOutNode,\n      onMouseOver: this.handleOnMouseOverNode,\n      opacity: this.props.opacity,\n    };\n\n    const textProps = {\n      dx: this.props.dx || CONST.NODE_LABEL_DX,\n      dy: CONST.NODE_LABEL_DY,\n      fill: this.props.fontColor,\n      fontSize: this.props.fontSize,\n      fontWeight: this.props.fontWeight,\n      opacity: this.props.opacity,\n    };\n\n    const size = this.props.size;\n\n    let gtx = this.props.cx,\n      gty = this.props.cy,\n      label = null,\n      node = null;\n\n    if (this.props.svg || this.props.viewGenerator) {\n      const height = size / 10;\n      const width = size / 10;\n      const tx = width / 2;\n      const ty = height / 2;\n      const transform = `translate(${tx},${ty})`;\n\n      label = (\n        <text {...textProps} transform={transform}>\n          {this.props.label}\n        </text>\n      );\n\n      // By default, if a view generator is set, it takes precedence over any svg image url\n      if (this.props.viewGenerator && !this.props.overrideGlobalViewGenerator) {\n        node = (\n          <svg {...nodeProps} width={width} height={height} id=\"clickable-node\">\n            <foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">\n              <section\n                style={{ height, width, backgroundColor: \"transparent\" }}\n              >\n                {this.props.viewGenerator(this.props)}\n              </section>\n            </foreignObject>\n          </svg>\n        );\n      } else {\n        node = (\n          <image\n            {...nodeProps}\n            href={this.props.svg}\n            width={width}\n            height={height}\n          />\n        );\n      }\n\n      // svg offset transform regarding svg width/height\n      gtx -= tx;\n      gty -= ty;\n    } else {\n      nodeProps.d = nodeHelper.buildSvgSymbol(size, this.props.type);\n      nodeProps.fill = this.props.fill;\n      nodeProps.stroke = this.props.stroke;\n      nodeProps.strokeWidth = this.props.strokeWidth;\n\n      label = <text {...textProps}>{this.props.label}</text>;\n      node = <path {...nodeProps} />;\n    }\n\n    const gProps = {\n      className: this.props.className,\n      cx: this.props.cx,\n      cy: this.props.cy,\n      id: this.props.id,\n      transform: `translate(${gtx},${gty})`,\n    };\n\n    function handleClick(e, data) {\n      console.log(data.foo);\n    }\n\n    return (\n      <g {...gProps}>\n        {node}\n        {this.props.renderLabel && label}\n      </g>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}